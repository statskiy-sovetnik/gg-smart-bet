(function(t){function e(e){for(var r,o,s=e[0],i=e[1],u=e[2],p=0,b=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);l&&l(e);while(b.length)b.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var i=n[s];0!==c[i]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},c={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/gg-smart-bet/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=i;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},1566:function(t,e,n){"use strict";n("f0cc")},16:function(t,e){},17:function(t,e){},18:function(t,e){},19:function(t,e){},2:function(t,e){},20:function(t,e){},21:function(t,e){},22:function(t,e){},"22be":function(t,e,n){"use strict";n("5a65")},23:function(t,e){},24:function(t,e){},2479:function(t,e,n){},25:function(t,e){},26:function(t,e){},27:function(t,e){},28:function(t,e){},29:function(t,e){},3:function(t,e){},30:function(t,e){},31:function(t,e){},32:function(t,e){},4:function(t,e){},4020:function(t,e,n){},5:function(t,e){},"5a65":function(t,e,n){},6:function(t,e){},"66e5":function(t,e,n){"use strict";n("2479")},7:function(t,e){},"76cf":function(t,e,n){"use strict";n("b293")},8:function(t,e){},9:function(t,e){},"90aa":function(t,e,n){"use strict";n("4020")},b293:function(t,e,n){},ca98:function(t,e,n){"use strict";n("e4c1")},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={class:"gg-root"};function a(t,e,n,a,o,s){var i=Object(r["o"])("Loading"),u=Object(r["o"])("SportsEventSelection"),l=Object(r["o"])("SportsEventExtended"),p=Object(r["o"])("CloseEventSection");return Object(r["i"])(),Object(r["e"])("div",c,[t.loading?(Object(r["i"])(),Object(r["c"])(i,{key:0})):(Object(r["i"])(),Object(r["e"])(r["a"],{key:1},[t.sports_event_in_progress?(Object(r["i"])(),Object(r["e"])(r["a"],{key:1},[Object(r["h"])(l,{gg_bet_contract:t.gg_bet_contract,sports_event:t.sports_event,user:t.user},null,8,["gg_bet_contract","sports_event","user"]),Object(r["h"])(p,{gg_bet_contract:t.gg_bet_contract,sports_event:t.sports_event,user:t.user,onClosingSportsEventCancelled:t.handleClosingSportsEventCancel,onClosingSportsEventStarted:t.handleClosingSportsEventStart},null,8,["gg_bet_contract","sports_event","user","onClosingSportsEventCancelled","onClosingSportsEventStarted"])],64)):(Object(r["i"])(),Object(r["c"])(u,{key:0,gg_bet_contract:t.gg_bet_contract,user:t.user,onSportsEventSelect:t.handleSportsEventSelect},null,8,["gg_bet_contract","user","onSportsEventSelect"]))],64))])}var o=n("1da1"),s=n("d4ec"),i=n("bee2"),u=n("262e"),l=n("2caf"),p=(n("96cf"),n("9ab4")),b=n("ce1f"),_=function(t){return Object(r["l"])("data-v-1edd7274"),t=t(),Object(r["j"])(),t},v={class:"container"},f=_((function(){return Object(r["f"])("h2",{class:"loading-text"},"Loading...",-1)})),d=[f];function h(t,e,n,c,a,o){return Object(r["i"])(),Object(r["e"])("div",v,d)}var m={name:"Loading"},g=(n("ca98"),n("6b0d")),O=n.n(g);const j=O()(m,[["render",h],["__scopeId","data-v-1edd7274"]]);var w=j,y=n("99e5"),k=n.n(y);function x(){return new k.a(window.ethereum)}n("99af"),n("d3b7");function C(t,e){return S.apply(this,arguments)}function S(){return S=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var r,c,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=!0,c=r?"https://api-rinkeby.etherscan.io/api?module=contract&action=getabi&address=".concat(e,"&apikey=").concat(n):"../GGbet.json",t.next=4,fetch(c);case 4:return a=t.sent,t.next=7,a.json();case 7:return o=t.sent,t.abrupt("return",r?JSON.parse(o.result):o.abi);case 9:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}var E=function(t){return Object(r["l"])("data-v-527665da"),t=t(),Object(r["j"])(),t},R={class:"container"},B=E((function(){return Object(r["f"])("h2",{class:"title"},"No sports events are taking place right now",-1)})),T={key:0};function G(t,e,n,c,a,o){var s=Object(r["o"])("SportsEventOption");return Object(r["i"])(),Object(r["e"])("div",R,[B,t.user.isOwnerOfGGbet?(Object(r["i"])(),Object(r["e"])("div",T,[(Object(r["i"])(!0),Object(r["e"])(r["a"],null,Object(r["n"])(t.sports_events_set,(function(e){return Object(r["i"])(),Object(r["c"])(s,{key:e.id,sports_event:e,onSportsEventSelect:t.emitSportsEventSelect},null,8,["sports_event","onSportsEventSelect"])})),128))])):Object(r["d"])("",!0)])}var I=function t(e){Object(s["a"])(this,t),this.balanceInWei="",this.isOwnerOfGGbet=!1,this.account=e},P=n("6e11"),A=function(t){return Object(r["l"])("data-v-01a6c237"),t=t(),Object(r["j"])(),t},U={class:"sports-event-option"},q={class:"data-block"},D={class:"team-name"},N=["src"],W=A((function(){return Object(r["f"])("span",{class:"team-divider"},"-",-1)})),M=["src"],F={class:"team-name"};function H(t,e,n,c,a,o){return Object(r["i"])(),Object(r["e"])("div",U,[Object(r["f"])("div",q,[Object(r["f"])("span",D,Object(r["p"])(t.sports_event.team_1_name),1),Object(r["f"])("img",{src:t.sports_event.team_1_logo,alt:"team_1_logo",class:"team-logo"},null,8,N),W,Object(r["f"])("img",{src:t.sports_event.team_2_logo,alt:"team_2_logo",class:"team-logo"},null,8,M),Object(r["f"])("span",F,Object(r["p"])(t.sports_event.team_2_name),1)]),Object(r["f"])("button",{class:"button _small",onClick:e[0]||(e[0]=function(){return t.emitBtnClick&&t.emitBtnClick.apply(t,arguments)})},"Start")])}var L=function t(){Object(s["a"])(this,t),this.id=0,this.team_1_name="",this.team_2_name="",this.team_1_win_percent=0,this.team_2_win_percent=0,this.team_1_logo="",this.team_2_logo=""},$=function(t){Object(u["a"])(n,t);var e=Object(l["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(i["a"])(n,[{key:"emitBtnClick",value:function(){this.$emit("sportsEventSelect",this.sports_event.id)}}]),n}(b["b"]);$=Object(p["a"])([Object(b["a"])({props:{sports_event:{type:L,required:!0}}})],$);var J=$;n("1566");const V=O()(J,[["render",H],["__scopeId","data-v-01a6c237"]]);var Y=V,z=function(t){Object(u["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.gg_bet_contract=null,t.sports_events_count=0,t.sports_events_set=[],t}return Object(i["a"])(n,[{key:"created",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.user.isOwnerOfGGbet){t.next=3;break}return t.next=3,this.updateSportsEventsSet();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateSportsEventsSet",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateSportsEventsCount();case 2:e=0;case 3:if(!(e<this.sports_events_count)){t.next=11;break}return t.next=6,this.getSportsEventById(e);case 6:n=t.sent,this.sports_events_set.push(n);case 8:e++,t.next=3;break;case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateSportsEventsCount",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.getSportsEventsCount().call({from:this.user.account});case 2:this.sports_events_count=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getSportsEventById",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(n=this.gg_bet_contract)||void 0===n?void 0:n.methods.getSportsEventById(e).call({from:this.user.account});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"emitSportsEventSelect",value:function(t){this.$emit("sportsEventSelect",t)}}]),n}(b["b"]);z=Object(p["a"])([Object(b["a"])({components:{SportsEventOption:Y},props:{user:{type:I,required:!0},gg_bet_contract:{type:P["Contract"],required:!0}}})],z);var Z=z;n("22be");const K=O()(Z,[["render",G],["__scopeId","data-v-527665da"]]);var Q=K,X=function(t){return Object(r["l"])("data-v-ff3d64f8"),t=t(),Object(r["j"])(),t},tt={class:"wrapper"},et={class:"box"},nt={class:"container content-container"},rt={class:"content-wrapper"},ct={class:"teams-data"},at={class:"team-wrapper"},ot={class:"team-name"},st=["src"],it=X((function(){return Object(r["f"])("span",{class:"team-divider"},"-",-1)})),ut={class:"team-wrapper"},lt=["src"],pt={class:"team-name"},bt={key:0,class:"user-bet-info-block"},_t={class:"user-bet"},vt=X((function(){return Object(r["f"])("br",null,null,-1)})),ft={key:1,class:"bet-pending-text"};function dt(t,e,n,c,a,o){var s,i=Object(r["o"])("ControlPanel");return Object(r["i"])(),Object(r["e"])("div",tt,[Object(r["f"])("div",et,[Object(r["f"])("div",nt,[Object(r["f"])("div",rt,[Object(r["f"])("div",ct,[Object(r["f"])("div",at,[Object(r["f"])("span",ot,Object(r["p"])(t.sports_event.team_1_name),1),Object(r["f"])("img",{src:t.sports_event.team_1_logo,alt:"Team 1 Logo",class:"team-logo"},null,8,st)]),it,Object(r["f"])("div",ut,[Object(r["f"])("img",{src:t.sports_event.team_2_logo,alt:"Team 2 Logo",class:"team-logo"},null,8,lt),Object(r["f"])("span",pt,Object(r["p"])(t.sports_event.team_2_name),1)])]),t.user_bet_is_accepted?(Object(r["i"])(),Object(r["e"])("div",bt,[Object(r["f"])("p",_t,[Object(r["g"])(" Your bet is "+Object(r["p"])(null===(s=t.user_bet_data)||void 0===s?void 0:s.bet)+" Wei ",1),vt,Object(r["g"])(" on "+Object(r["p"])(t.outcome_label),1)])])):t.do_display_pending_bet?(Object(r["i"])(),Object(r["e"])("div",ft," Your bet is pending... ")):(Object(r["i"])(),Object(r["c"])(i,{key:2,gg_bet_contract:t.gg_bet_contract,sports_event:t.sports_event,onBetRequest:t.handleBetRequest},null,8,["gg_bet_contract","sports_event","onBetRequest"]))])])])])}n("7db0"),n("ac1f"),n("1276"),n("2ca0");function ht(t){return document.cookie.split(";").find((function(e){return e.startsWith(t)}))}function mt(t,e,n){var r=n?"; expires="+n.toUTCString():"";document.cookie="".concat(t,"=").concat(e)+r}function gt(t){ht(t)&&mt(t,"",new Date(0))}var Ot=function(t){return Object(r["l"])("data-v-456eb967"),t=t(),Object(r["j"])(),t},jt={class:"control-panel"},wt=Ot((function(){return Object(r["f"])("h5",{class:"control-title"},"Make your bet",-1)})),yt=Ot((function(){return Object(r["f"])("p",{class:"control-description"}," Enter the amount of Wei that you willing to bet and select the outcome of the match if you are smart enough ",-1)})),kt={class:"input-block"},xt=Ot((function(){return Object(r["f"])("label",{class:"input-label",for:"bet_amount_input"},"Enter your bet amount",-1)})),Ct={class:"control-buttons-block"},St={class:"control-button-text _content"},Et={class:"control-button-text _coef"},Rt=Ot((function(){return Object(r["f"])("span",{class:"control-button-text _content"},"Draw",-1)})),Bt={class:"control-button-text _coef"},Tt={class:"control-button-text _content"},Gt={class:"control-button-text _coef"};function It(t,e,n,c,a,o){return Object(r["i"])(),Object(r["e"])("div",jt,[wt,yt,Object(r["f"])("div",kt,[xt,Object(r["r"])(Object(r["f"])("input",{id:"bet_amount_input","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.amount_in_wei=e}),class:"input",min:"0",type:"number",onInput:e[1]||(e[1]=function(){return t.handleAmountInput&&t.handleAmountInput.apply(t,arguments)})},null,544),[[r["q"],t.amount_in_wei]])]),Object(r["f"])("div",Ct,[Object(r["f"])("button",{class:"control-button button _pink",onClick:e[2]||(e[2]=function(e){return t.handleControlBtnClick("team_1")})},[Object(r["f"])("span",St,Object(r["p"])(t.sports_event.team_1_name)+" wins",1),Object(r["f"])("span",Et,"x"+Object(r["p"])(t.team_1_win_coef),1)]),Object(r["f"])("button",{class:"control-button button _pink",onClick:e[3]||(e[3]=function(e){return t.handleControlBtnClick("draw")})},[Rt,Object(r["f"])("span",Bt,"x"+Object(r["p"])(t.draw_coef),1)]),Object(r["f"])("button",{class:"control-button button _pink",onClick:e[4]||(e[4]=function(e){return t.handleControlBtnClick("team_2")})},[Object(r["f"])("span",Tt,Object(r["p"])(t.sports_event.team_2_name)+" wins",1),Object(r["f"])("span",Gt,"x"+Object(r["p"])(t.team_2_win_coef),1)])])])}n("a9e3"),n("5319"),n("25f0");var Pt=n("901e");n("b680");function At(t){var e=t/100,n=1/e;return Number(n.toFixed(2))}function Ut(t,e){var n=Number(100-t-e);return At(n)}var qt=x(),Dt=function(t){Object(u["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.sports_event=null,t.bet_amount_is_correct=!0,t.amount_in_wei=0,t.min_bet_in_wei=new Pt["BigNumber"](0),t}return Object(i["a"])(n,[{key:"team_1_win_coef",get:function(){var t,e=Number(null===(t=this.sports_event)||void 0===t?void 0:t.team_1_win_percent);return At(e)}},{key:"draw_coef",get:function(){var t,e,n=(null===(t=this.sports_event)||void 0===t?void 0:t.team_1_win_percent)||0,r=(null===(e=this.sports_event)||void 0===e?void 0:e.team_2_win_percent)||0;return Ut(n,r)}},{key:"team_2_win_coef",get:function(){var t,e=Number(null===(t=this.sports_event)||void 0===t?void 0:t.team_2_win_percent);return At(e)}},{key:"min_bet_in_eth",get:function(){var t=qt.utils.toBN(this.min_bet_in_wei);return qt.utils.fromWei(t)}},{key:"created",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateMinBetInWei();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateMinBetInWei",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.min_bet().call();case 2:this.min_bet_in_wei=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleAmountInput",value:function(){var t=this.amount_in_wei.toString().replace(/[^0-9]/g,"");this.amount_in_wei=Number(t)}},{key:"handleControlBtnClick",value:function(t){this.validateAmountInput(),this.bet_amount_is_correct&&this.$emit("betRequest",t,this.amount_in_wei)}},{key:"validateAmountInput",value:function(){this.bet_amount_is_correct=!0,this.validateAmountInputByMinValue()}},{key:"validateAmountInputByMinValue",value:function(){var t=new Pt["BigNumber"](this.amount_in_wei);t.isLessThan(this.min_bet_in_wei)&&(alert("Minimal bet is "+this.min_bet_in_eth+" ether"),this.bet_amount_is_correct=!1)}}]),n}(b["b"]);Dt=Object(p["a"])([Object(b["a"])({props:{sports_event:{type:L,required:!0},gg_bet_contract:{type:P["Contract"],required:!0}}})],Dt);var Nt=Dt;n("d3f6");const Wt=O()(Nt,[["render",It],["__scopeId","data-v-456eb967"]]);var Mt=Wt,Ft=x(),Ht=function(t){Object(u["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.user_bet_data=null,t.pending_txs_event=null,t.bet_log=null,t.bet_tx_cookie_name="bet_tx_hash",t.bet_is_pending=Boolean(t.getBetPendingTxHashCookie()),t}return Object(i["a"])(n,[{key:"user_bet_is_accepted",get:function(){return!!this.user_bet_data&&"0"!==this.user_bet_data.bet}},{key:"do_display_pending_bet",get:function(){return this.bet_is_pending&&!this.user_bet_is_accepted}},{key:"outcome_label",get:function(){var t,e;return"team_1"===(null===(t=this.user_bet_data)||void 0===t?void 0:t.outcome)?this.sports_event.team_1_name:"team_2"===(null===(e=this.user_bet_data)||void 0===e?void 0:e.outcome)?this.sports_event.team_2_name:"draw"}},{key:"created",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateUserBetData();case 2:this.user_bet_is_accepted||this.subscribeOnBetAcceptance();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateUserBetData",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.getUserBet().call({from:this.user.account});case 2:n=t.sent,this.user_bet_data={bet:n.bet,outcome:n.outcome};case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleBetRequest",value:function(t,e){this.performBetWithTrack(t,e)}},{key:"performBetWithTrack",value:function(t,e){var n,r=this;this.subscribeOnPendingTxs(),null===(n=this.bet(t,e))||void 0===n||n.on("transactionHash",(function(){r.subscribeOnBetAcceptance()})).on("error",(function(t){r.handleBetCancel(t)}))}},{key:"subscribeOnPendingTxs",value:function(){this.pending_txs_event=Ft.eth.subscribe("pendingTransactions")}},{key:"unsubscribeOnPendingTxs",value:function(){var t;null===(t=this.pending_txs_event)||void 0===t||t.unsubscribe()}},{key:"bet",value:function(t,e){var n;return"team_1"===t?n=this._betOnTeam1(e):"draw"===t?n=this._betOnDraw(e):"team_2"===t&&(n=this._betOnTeam2(e)),n}},{key:"_betOnTeam1",value:function(t){var e;return null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.betOnTeam1().send({from:this.user.account,value:t})}},{key:"_betOnDraw",value:function(t){var e;return null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.betOnDraw().send({from:this.user.account,value:t})}},{key:"_betOnTeam2",value:function(t){var e;return null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.betOnTeam2().send({from:this.user.account,value:t})}},{key:"saveUserPendingTxHashToCookies",value:function(){var t,e=this;null===(t=this.pending_txs_event)||void 0===t||t.on("data",function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ft.eth.getTransaction(n);case 2:r=t.sent,e.isTxFromUserToGGbet(r)&&mt(e.bet_tx_cookie_name,n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"handleBetCancel",value:function(t){var e;this.bet_is_pending=!1,null===(e=this.pending_txs_event)||void 0===e||e.unsubscribe(),console.log(t)}},{key:"subscribeOnBetAcceptance",value:function(){var t,e=this,n={filter:{_address:this.user.account}};null===(t=this.gg_bet_contract)||void 0===t||t.once("BetAccepted",n,(function(t,n){t||e.handleBetAcceptanceEvent(n)}))}},{key:"handleBetAcceptanceEvent",value:function(t){this.bet_log=t,gt(this.bet_tx_cookie_name),this.unsubscribeOnPendingTxs(),this.bet_is_pending=!1,this.updateUserBetData()}},{key:"getBetPendingTxHashCookie",value:function(){return ht(this.bet_tx_cookie_name)}},{key:"isTxFromUserToGGbet",value:function(t){return t.from===this.user.account&&t.to===this.gg_bet_contract.options.address}},{key:"handleCloseEventBtnClick",value:function(){}},{key:"closeCurrentSportsEvent",value:function(){}}]),n}(b["b"]);Ht=Object(p["a"])([Object(b["a"])({components:{ControlPanel:Mt},props:{sports_event:{type:L,required:!0},gg_bet_contract:{type:P["Contract"],required:!0},user:{type:I,required:!0}},watch:{pending_txs_event:function(t){null!==t&&(this.saveUserPendingTxHashToCookies(),this.bet_is_pending=!0)}}})],Ht);var Lt=Ht;n("66e5");const $t=O()(Lt,[["render",dt],["__scopeId","data-v-ff3d64f8"]]);var Jt=$t,Vt=function(t){return Object(r["l"])("data-v-5a2cc8e8"),t=t(),Object(r["j"])(),t},Yt={key:0,class:"container"},zt=Vt((function(){return Object(r["f"])("h4",{class:"close-event-title"},"Close current sports event",-1)}));function Zt(t,e,n,c,a,o){return t.user.isOwnerOfGGbet?(Object(r["i"])(),Object(r["e"])("div",Yt,[zt,Object(r["f"])("button",{class:"close-event-btn button",onClick:e[0]||(e[0]=function(e){return t.handleCloseEventBtnClick("team_1",t.team_1_win_coef)})},Object(r["p"])(t.sports_event.team_1_name)+" wins ",1),Object(r["f"])("button",{class:"close-event-btn button",onClick:e[1]||(e[1]=function(e){return t.handleCloseEventBtnClick("draw",t.draw_coef)})}," Draw "),Object(r["f"])("button",{class:"close-event-btn button",onClick:e[2]||(e[2]=function(e){return t.handleCloseEventBtnClick("team_2",t.team_2_win_coef)})},Object(r["p"])(t.sports_event.team_2_name)+" wins ",1)])):Object(r["d"])("",!0)}n("b65f");var Kt=function(t){Object(u["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.sports_event=null,t}return Object(i["a"])(n,[{key:"team_1_win_coef",get:function(){var t,e=Number(null===(t=this.sports_event)||void 0===t?void 0:t.team_1_win_percent);return At(e)}},{key:"draw_coef",get:function(){var t,e,n=(null===(t=this.sports_event)||void 0===t?void 0:t.team_1_win_percent)||0,r=(null===(e=this.sports_event)||void 0===e?void 0:e.team_2_win_percent)||0;return Ut(n,r)}},{key:"team_2_win_coef",get:function(){var t,e=Number(null===(t=this.sports_event)||void 0===t?void 0:t.team_2_win_percent);return At(e)}},{key:"handleCloseEventBtnClick",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.emitClosingSportsEventStart(),t.next=3,this.closeCurrentSportsEvent(e,n);case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"closeCurrentSportsEvent",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,n){var r,c,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Math.trunc(n),c=this.getCoefDecimalPartNormalized(n),t.prev=2,t.next=5,null===(a=this.gg_bet_contract)||void 0===a?void 0:a.methods.endCurrentSportsEvent(e,r,c).send({from:this.user.account});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](2),this.emitClosingSportsEventCancel();case 10:case"end":return t.stop()}}),t,this,[[2,7]])})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getCoefDecimalPartNormalized",value:function(t){var e=Number((t%1).toFixed(2));return e?100*e:e}},{key:"emitClosingSportsEventStart",value:function(){this.$emit("closingSportsEventStarted")}},{key:"emitClosingSportsEventCancel",value:function(){this.$emit("closingSportsEventCancelled")}}]),n}(b["b"]);Kt=Object(p["a"])([Object(b["a"])({props:{sports_event:{type:L,required:!0},gg_bet_contract:{type:P["Contract"],required:!0},user:{type:I,required:!0}}})],Kt);var Qt=Kt;n("90aa");const Xt=O()(Qt,[["render",Zt],["__scopeId","data-v-5a2cc8e8"]]);var te=Xt,ee=function(t){Object(u["a"])(n,t);var e=Object(l["a"])(n);function n(){var t;return Object(s["a"])(this,n),t=e.apply(this,arguments),t.web3=new k.a,t.loading=!0,t.user={account:"",balanceInWei:"",isOwnerOfGGbet:!1},t.accounts=[],t.etherscan_api_key="JWZAIV2C8HHU2R9WYT9HY8U4PACSGE6T8Z",t.gg_bet_contract_address="0xd821A8F0c47Fc55587B80e417189b5d26359A950",t.gg_bet_contract=null,t.sports_event_in_progress=!1,t.sports_event=null,t.gg_bet_contract_owner="",t}return Object(i["a"])(n,[{key:"created",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,this.initWeb3(),t.next=4,this.initGGbetContract();case 4:return t.next=6,this.updateUserData();case 6:return t.next=8,this.updateSportsEvent();case 8:this.subscribeOnSportsEventClosing(),this.loading=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"initWeb3",value:function(){this.web3=x()}},{key:"initGGbetContract",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,C(this.gg_bet_contract_address,this.etherscan_api_key);case 2:e=t.sent,this.gg_bet_contract=new this.web3.eth.Contract(e,this.gg_bet_contract_address);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateUserData",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateUserAccountData();case 2:return t.next=4,this.updateUserBalance();case 4:return t.next=6,this.updateUserOwnership();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateUserAccountData",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getAccounts();case 2:this.accounts=t.sent,this.user.account=this.accounts[0];case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateUserBalance",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.web3.eth.getBalance(this.user.account);case 2:this.user.balanceInWei=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateUserOwnership",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateGGbetContractOwner();case 2:this.user.isOwnerOfGGbet=this.gg_bet_contract_owner===this.user.account;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateGGbetContractOwner",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.owner().call();case 2:this.gg_bet_contract_owner=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateSportsEvent",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.updateSportsEventProgressFlag();case 2:if(!this.sports_event_in_progress){t.next=6;break}return t.next=5,null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.current_sports_event().call();case 5:this.sports_event=t.sent;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateSportsEventProgressFlag",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.gg_bet_contract)||void 0===e?void 0:e.methods.sports_event_in_progress().call();case 2:this.sports_event_in_progress=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"subscribeOnSportsEventClosing",value:function(){var t,e=this;null===(t=this.gg_bet_contract)||void 0===t||t.once("SportsEventClosed",(function(t){t||e.handleSportsEventClosing()}))}},{key:"handleSportsEventClosing",value:function(){this.sports_event_in_progress=!1,this.sports_event=null,this.loading=!1}},{key:"handleSportsEventSelect",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.setCurrentSportsEventById(e);case 4:return t.next=6,this.updateSportsEvent();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),alert("Unable to activate sports event");case 11:this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setCurrentSportsEventById",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,null===(n=this.gg_bet_contract)||void 0===n?void 0:n.methods.setCurrentSportsEventById(e).send({from:this.user.account});case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleClosingSportsEventStart",value:function(){this.loading=!0}},{key:"handleClosingSportsEventCancel",value:function(){this.loading=!1}}]),n}(b["b"]);ee=Object(p["a"])([Object(b["a"])({components:{CloseEventSection:te,SportsEventExtended:Jt,SportsEventSelection:Q,Loading:w}})],ee);var ne=ee;n("76cf");const re=O()(ne,[["render",a]]);var ce=re;function ae(){return Boolean(window.ethereum)}function oe(){return window.ethereum.send("eth_requestAccounts")}function se(){return ie.apply(this,arguments)}function ie(){return ie=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!ae()){t.next=4;break}return t.next=3,oe();case 3:window.web3=x();case 4:case"end":return t.stop()}}),t)}))),ie.apply(this,arguments)}se();var ue=Object(r["b"])(ce);ue.mount("#app")},d3f6:function(t,e,n){"use strict";n("ef5c")},e4c1:function(t,e,n){},ef5c:function(t,e,n){},f0cc:function(t,e,n){}});
//# sourceMappingURL=app.0f4bcc5e.js.map